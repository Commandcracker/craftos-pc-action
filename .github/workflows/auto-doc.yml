name: Update README.md with the latest actions.yml

on:
    workflow_dispatch:
    push:
        branches:
            - main

permissions:
    pull-requests: write
    contents: write

jobs:
    update-doc:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout ğŸ›ï¸
              uses: actions/checkout@v4
              with:
                  fetch-depth: 0 # otherwise, you will failed to push refs to dest repo

            - name: auto-doc ğŸ“„
              uses: tj-actions/auto-doc@v3

            - name: Verify Changed files âœ…
              uses: tj-actions/verify-changed-files@v16
              id: verify-changed-files
              with:
                  files: |
                      README.md

            - name: Create Pull Request ğŸš€
              if: steps.verify-changed-files.outputs.files_changed == 'true'
              uses: peter-evans/create-pull-request@v5
              with:
                  base: "main"
                  title: "auto-doc: Updated README.md"
                  branch: "chore/auto-doc-update-readme"
                  commit-message: "auto-doc: Updated README.md"
                  body: "auto-doc: Updated README.md"
